<div class="row">
    <div class="col-sm-12">
      <app-card [hidHeader]="true" [options]="false">
        <div class="d-flex align-items-center justify-content-between" role="button">
            <div class="d-flex flex-row align-items-center justify-content-between w-100" (click)="clienteCollapsed = !clienteCollapsed" [attr.aria-expanded]="!clienteCollapsed" aria-controls="collapseCliente">
              <h5 class="font-weight-bold mb-0">Cliente</h5>
              <i class="fa" [ngClass]="{'fa-chevron-up': clienteCollapsed, 'fa-chevron-down': !clienteCollapsed }"></i>
            </div>
        </div>
        <hr>

        <div id="collapseCliente" [ngbCollapse]="clienteCollapsed">
            <div class="d-flex flex-row justify-content-end" *ngIf="!edicionCliente">
              <button class="btn btn-icon btn-primary" pTooltip="Editar" tooltipPosition="top" (click)="editarForm()">
                <i class="fa fa-edit"></i>
              </button>
            </div>
            <form [formGroup]="clienteFormGroup" class="d-flex flex-column">
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Primer nombre</label>
                              <input formControlName="primerNombre" type="text" class="form-control" placeholder="Primer nombre">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Segundo nombre</label>
                              <input formControlName="segundoNombre" type="text" class="form-control" placeholder="Segundo nombre">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Apellidos</label>
                              <input formControlName="apellidos" type="text" class="form-control" placeholder="Apellidos">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">País</label>
                              <select formControlName="paisId" class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.paisId.invalid &&
                                  clienteFormGroup.controls.paisId.touched
                              }">
                                <ng-container *ngFor="let item of listPaises">
                                  <option [value]="item.valor">{{item.nombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ paisIdErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Departamento</label>
                              <select formControlName="deptoId" class="form-control" (change)="cargarCiudadesDepto($event.target.value)"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.deptoId.invalid &&
                                  clienteFormGroup.controls.deptoId.touched
                              }">
                                <ng-container *ngFor="let item of listDeptos">
                                  <option [value]="item.valor">{{item.nombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ deptoIdErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                          <div class="form-group">
                            <label for="">Ciudad</label>
                            <select formControlName="ciudadId" class="form-control"
                            [ngClass]="{
                              'is-invalid':
                                clienteFormGroup.controls.ciudadId.invalid &&
                                clienteFormGroup.controls.ciudadId.touched
                            }">
                              <ng-container *ngFor="let item of listCiudades">
                                <option [value]="item.valor">{{item.nombre}}</option>
                              </ng-container>
                            </select>
                            <div class="invalid-feedback"> {{ ciudadIdErrorMensaje }} </div>
                          </div>
                      </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Nit</label>
                              <input formControlName="nit" type="text" class="form-control" placeholder="Nit"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.nit.invalid &&
                                  clienteFormGroup.controls.nit.touched
                              }">
                              <div class="invalid-feedback"> {{ nitErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">DV</label>
                              <input formControlName="dv" type="text" class="form-control" placeholder="Dígito de verificación"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.dv.invalid &&
                                  clienteFormGroup.controls.dv.touched
                              }">
                              <div class="invalid-feedback"> {{ dvErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Empresa</label>
                              <select formControlName="empresaId" class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.empresaId.invalid &&
                                  clienteFormGroup.controls.empresaId.touched
                              }">
                                <ng-container *ngFor="let item of listEmpresas">
                                  <option [value]="item.id">{{item.emprNombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ empresaIdErrorMensaje }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Ciuu</label>
                              <input formControlName="ciuu" type="text" class="form-control" placeholder="Ciuu">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Id rep legal</label>
                              <input formControlName="idRepLegal" type="text" class="form-control" placeholder="Id representante legal"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.idRepLegal.invalid &&
                                  clienteFormGroup.controls.idRepLegal.touched
                              }">
                              <div class="invalid-feedback"> {{ idRepLegalErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Representante Legal</label>
                              <input formControlName="representanteLegal" type="text" class="form-control" placeholder="Representante Legal"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.representanteLegal.invalid &&
                                  clienteFormGroup.controls.representanteLegal.touched
                              }">
                              <div class="invalid-feedback"> {{ representanteLegalErrorMensaje }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Celular</label>
                              <input formControlName="celular" type="text" class="form-control" placeholder="Celular"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.celular.invalid &&
                                  clienteFormGroup.controls.celular.touched
                              }">
                              <div class="invalid-feedback"> {{ celularErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Teléfono fijo</label>
                              <input formControlName="telefonoFijo" type="text" class="form-control" placeholder="Teléfono fijo">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Contacto</label>
                              <input formControlName="contacto" type="text" class="form-control" placeholder="Contacto"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.contacto.invalid &&
                                  clienteFormGroup.controls.contacto.touched
                              }">
                              <div class="invalid-feedback"> {{ contactoErrorMensaje }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Correo</label>
                              <input formControlName="correo" type="text" class="form-control" placeholder="Correo"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.correo.invalid &&
                                  clienteFormGroup.controls.correo.touched
                              }">
                              <div class="invalid-feedback"> {{ correoErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Correo facturación</label>
                              <input formControlName="correoFacturacion" type="text" class="form-control" placeholder="Correo facturación"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.correoFacturacion.invalid &&
                                  clienteFormGroup.controls.correoFacturacion.touched
                              }">
                              <div class="invalid-feedback"> {{ correoFacturacionErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Página web</label>
                              <input formControlName="paginaWeb" type="text" class="form-control" placeholder="Página web">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Dirección</label>
                              <input formControlName="direccion" type="text" class="form-control" placeholder="Dirección"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.direccion.invalid &&
                                  clienteFormGroup.controls.direccion.touched
                              }">
                              <div class="invalid-feedback"> {{ direccionErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Cobertura</label>
                              <input formControlName="cobertura" type="text" class="form-control" placeholder="Cobertura"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.cobertura.invalid &&
                                  clienteFormGroup.controls.cobertura.touched
                              }">
                              <div class="invalid-feedback"> {{ coberturaErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Desc global</label>
                              <input formControlName="descGlobal" type="text" class="form-control" placeholder="Desc global"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.descGlobal.invalid &&
                                  clienteFormGroup.controls.descGlobal.touched
                              }">
                              <div class="invalid-feedback"> {{ descGlobalErrorMensaje }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Días pago</label>
                              <input formControlName="diasPago" type="text" class="form-control" placeholder="Días pago"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.diasPago.invalid &&
                                  clienteFormGroup.controls.diasPago.touched
                              }">
                              <div class="invalid-feedback"> {{ diasPagoErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Estado operación</label>
                              <input formControlName="estadoOperacion" type="text" class="form-control" placeholder="Estado Operación"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.estadoOperacion.invalid &&
                                  clienteFormGroup.controls.estadoOperacion.touched
                              }">
                              <div class="invalid-feedback"> {{ estadoOperacionErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Jurídica</label>
                              <input formControlName="juridica" type="text" class="form-control" placeholder="Jurídica"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.juridica.invalid &&
                                  clienteFormGroup.controls.juridica.touched
                              }">
                              <div class="invalid-feedback"> {{ juridicaErrorMensaje }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Régimen</label>
                              <select formControlName="regimenId" class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.regimenId.invalid &&
                                  clienteFormGroup.controls.regimenId.touched
                              }">
                                <ng-container *ngFor="let item of listRegimenes">
                                  <option [value]="item.valor">{{item.nombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ regimenIdErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Responsabilidad fiscal</label>
                              <select formControlName="respFiscalId" class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.respFiscalId.invalid &&
                                  clienteFormGroup.controls.respFiscalId.touched
                              }">
                                <ng-container *ngFor="let item of listResponsabilidadesFiscales">
                                  <option [value]="item.valor">{{item.nombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ respFiscalIdErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Responsabilidad tributaria</label>
                              <select formControlName="respTributariaId" class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.respTributariaId.invalid &&
                                  clienteFormGroup.controls.respTributariaId.touched
                              }">
                                <ng-container *ngFor="let item of listResponsabilidadesTributarias">
                                  <option [value]="item.valor">{{item.nombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ respTributariaIdErrorMensaje }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Tipo cliente</label>
                              <select formControlName="tipoClienteId" class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.tipoClienteId.invalid &&
                                  clienteFormGroup.controls.tipoClienteId.touched
                              }">
                                <ng-container *ngFor="let item of listTipoClientes">
                                  <option [value]="item.valor">{{item.nombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ tipoClienteIdErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Tipo id</label>
                              <select formControlName="tipoIdId" class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.tipoIdId.invalid &&
                                  clienteFormGroup.controls.tipoIdId.touched
                              }">
                                <ng-container *ngFor="let item of listTipoIds">
                                  <option [value]="item.valor">{{item.nombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ tipoIdIdErrorMensaje }} </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Clase jurídica</label>
                              <select formControlName="clasJuridicaId" class="form-control"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.clasJuridicaId.invalid &&
                                  clienteFormGroup.controls.clasJuridicaId.touched
                              }">
                                <ng-container *ngFor="let item of listClasesJuridicas">
                                  <option [value]="item.valor">{{item.nombre}}</option>
                                </ng-container>
                              </select>
                              <div class="invalid-feedback"> {{ clasJuridicaIdErrorMensaje }} </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Localidad</label>
                              <input formControlName="localidad" type="text" class="form-control" placeholder="Localidad">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                              <label for="">Razón social</label>
                              <input formControlName="razonSocial" type="text" class="form-control" placeholder="Razón social"
                              [ngClass]="{
                                'is-invalid':
                                  clienteFormGroup.controls.razonSocial.invalid &&
                                  clienteFormGroup.controls.razonSocial.touched
                              }">
                              <div class="invalid-feedback"> {{ razonSocialErrorMensaje }} </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
            <ng-container *ngIf="edicionCliente">
                <hr />
                <div class="d-flex justify-content-end">
                  <button class="btn btn-icon btn-danger" pTooltip="Cancelar edición" tooltipPosition="left" (click)="cancelarEdicion()">
                    <i class="fa fa-ban"></i>
                  </button>
                  <button class="btn btn-icon btn-primary ml-3" pTooltip="Actualizar cliente" tooltipPosition="left" (click)="actualizarCliente()">
                    <i class="fa fa-save"></i>
                  </button>
                </div>
            </ng-container>
        </div>
      </app-card>

      <app-card [hidHeader]="true" [options]="false">
        <div class="d-flex align-items-center justify-content-between" role="button">
            <div class="d-flex flex-row align-items-center justify-content-between w-100" (click)="contratoCollapsed = !contratoCollapsed" [attr.aria-expanded]="!contratoCollapsed" aria-controls="collapseContratos">
              <h5 class="font-weight-bold mb-0">Contratos Cliente</h5>
              <i class="fa" [ngClass]="{'fa-chevron-up': contratoCollapsed, 'fa-chevron-down': !contratoCollapsed }"></i>
            </div>
        </div>
        <hr>
        <div id="collapseContratos" [ngbCollapse]="contratoCollapsed">

          <div class="d-flex justify-content-end m-2">
            <button class="btn btn-icon btn-primary" pTooltip="Crear contrato cliente" tooltipPosition="left" (click)="abrirModalCrearContrato()">
              <i class="fa fa-plus"></i>
            </button>
          </div>

            <p-table [columns]="colsContratosCliente" [value]="listContratosCliente" selectionMode="single" [(selection)]="seletedContratoCliente" [scrollable]="true" [rows]="10">
                <ng-template pTemplate="header" let-columns>
                    <tr>
                        <th *ngFor="let col of columns">
                            {{col.header}}
                        </th>
                        <th [style.width.rem]="5"></th>
                    </tr>
                    </ng-template>

                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                    <tr style="height:34px" [pSelectableRow]="rowData">
                        <td *ngFor="let col of columns">
                            {{rowData[col.field]}}
                        </td>
                        <td [style.width.rem]="5" class="text-center">
                          <button class="btn btn-icon btn-dark icon-detail-style" pTooltip="Ver contrato cliente" tooltipPosition="left" (click)="verContratoCliente(rowData)">
                            <i class="fa fa-search"></i>
                          </button>
                        </td>
                        <td [style.width.rem]="5" class="text-center">
                          <button class="btn btn-icon btn-dark icon-detail-style"  pTooltip="Eliminar contrato cliente" tooltipPosition="left">
                            <i class="fa fa-trash"></i>
                          </button>                   
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
      </app-card>

    </div>
</div>
